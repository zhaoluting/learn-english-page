import{_ as N,k as f,r as L,j as b,c as u,h as i,H as D,I as P,g as o,w as c,i as y,x as m,u as I,D as a,f as B,o as n,a7 as q,p as T,q as x,S as A,e as R,N as M,R as O,y as W,z as j}from"./index-8e7bf8f6.js";import{q as p,v as E,L as F,W as H}from"./index-d4e83027.js";import C from"./summary-9be90540.js";import{g as $,f as G}from"./AnalyseSong-82693477.js";import{s as g}from"./aalist-1ba4c056.js";import"./aawords-32ca6d9f.js";import"./NoteItem-a714bcef.js";const J=r=>(W("data-v-bca2c962"),r=r(),j(),r),K={class:"song-quiz"},U={class:"quiz-desc"},X={class:"opt-btns"},Y={class:"content-warp"},Z=["src"],ee={class:"video-warp"},se=J(()=>i("div",{class:"mosaic"},null,-1)),oe={__name:"quiz",setup(r){const l=f(),w=f(),h=f(),e=L({quizNum:20240519,songs:[],nowIdx:0,showVideo:!1,showQuizCover:!0,coverImg:null,isQuiz:!0}),s=b(()=>e.songs[e.nowIdx]||null);function V(){const v=p[e.quizNum].list;e.songs=v.map(t=>({dateRange:p[e.quizNum].dateRange,title:p[e.quizNum].title,...t,...g[t.songIdx],videoOptions:$(g[t.songIdx],{currentTime:(t.quiz_lyrics[0].time+g[t.songIdx].lyricDelyTime)/1e3})})),console.log(e.songs)}function S(){e.showQuizCover=!0,h.value.showSummary(),setTimeout(()=>{e.showQuizCover=!1,d()},1500)}function d(){if(e.showVideo=!1,e.coverImg=null,e.nowIdx>=e.songs.length){e.showQuizCover=!0;return}e.coverImg=G(`${s.value.lrcName} (2).png`),s.value.quiz_type?(setTimeout(()=>{e.coverImg=null,e.showVideo=!0,e.isQuiz=!0,a(()=>{l.value.play()})},800),setTimeout(()=>{e.showVideo=!1,e.isQuiz=!1},800+s.value.last_time),setTimeout(()=>{e.showVideo=!0,a(()=>{l.value.play()})},800+10+s.value.last_time),setTimeout(()=>{e.showVideo=!1,e.nowIdx++,a(()=>{d()})},800+10+s.value.last_time*2)):(setTimeout(()=>{e.coverImg=null,e.showVideo=!0,e.isQuiz=!1,a(()=>{l.value.play()})},800),setTimeout(()=>{e.showVideo=!1,e.nowIdx++,a(()=>{d()})},800+10+s.value.last_time))}function z(){w.value.play(s.value.quiz_lyrics[0].time)}return V(),(v,t)=>{const k=B("van-button");return n(),u("div",K,[i("div",U,[(n(!0),u(D,null,P(e.songs,(_,Q)=>(n(),u("p",{key:_.song},m(Q+1)+".《"+m(_.song)+"》-"+m(_.singer),1))),128))]),o(C,{showCover:!0,showAnime:!1,songs:e.songs},null,8,["songs"]),i("div",X,[o(k,{plain:"",size:"small",onClick:S},{default:c(()=>[y("开始")]),_:1}),y(" "+m(e.nowIdx),1)]),o(I(H),{content:"赶紧学英语呀",color:"#ffffff1a",fontSize:12},{default:c(()=>[i("div",Y,[o(q,{name:"van-fade"},{default:c(()=>[T(o(C,{ref_key:"quizCover",ref:h,showCover:!1,showAnime:!0,songs:e.songs},null,8,["songs"]),[[x,e.showQuizCover]])]),_:1}),o(q,{name:"van-fade"},{default:c(()=>[T(i("img",{class:"summary-cover",src:e.coverImg},null,8,Z),[[x,e.coverImg]])]),_:1}),s.value&&e.showVideo?(n(),u("div",{key:0,class:A(["record-warp",s.value.className])},[i("div",ee,[(n(),R(I(E),M({key:e.nowIdx+"_"+e.isQuiz?1:0},s.value.videoOptions,{ref_key:"mvVideo",ref:l,onPlay:z,onPause:z}),null,16)),se,o(F,{ref_key:"lyricListShow",ref:w,mode:e.isQuiz?"quiz":"",lrc:s.value.quiz_lyrics,detail:s.value},null,8,["mode","lrc","detail"])])],2)):O("",!0)])]),_:1})])}}},ce=N(oe,[["__scopeId","data-v-bca2c962"]]);export{ce as default};
