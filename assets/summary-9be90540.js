import{_ as N,d as B,r as L,br as $,c as l,S as z,h as e,x as n,i as a,H as f,I as y,e as C,w as m,R as S,g as d,a7 as b,f as _,o as t,p as U,q as A,y as P,z as R}from"./index-8e7bf8f6.js";import{a as T,f as V,d as W}from"./AnalyseSong-82693477.js";import"./aawords-32ca6d9f.js";import"./aalist-1ba4c056.js";const D=B({name:"SummaryCover",components:{},props:{showCover:{type:Boolean,default:!0},showAnime:{type:Boolean,default:!0},songs:{type:Array}},setup(s,{emit:c}){const r=L({fullWords:[],textSlideUp:!1,songSlideUp:[],isShort:!0});k();function w(){r.textSlideUp?(r.textSlideUp=!1,r.songSlideUp=[]):(r.textSlideUp=!0,s.songs.map((u,i)=>(setTimeout(()=>{r.songSlideUp[i]=!0},i*50),u)))}function k(){!s.songs||s.songs.length==0||Promise.all(s.songs.map(u=>T(u.lrcName))).then(u=>{const i=u.map((p,h)=>{const o=p.lyrics.map(v=>v.remarkIdx);return[].concat(...o)});console.log(s.songs);let g=[].concat(...i).map(p=>p?p.toLowerCase():"");g=Array.from(new Set(g)),r.fullWords=g.sort()})}return{...$(r),getSongAssets:V,downloadImage:W,showSummary:w}}}),I=s=>(P("data-v-a10b343e"),s=s(),R(),s),q={class:"summary-page"},E={class:"date"},F={class:"summary-text"},H={class:"big"},j={class:"number"},G={class:"number"},J={key:0},K={class:"detail"},M=I(()=>e("br",null,null,-1)),O={class:"singer"},Q={key:1},X={key:2,class:"summary-warp"},Y={class:"date"},Z={class:"summary-text"},x={class:"big"},ss={class:"number"},es={class:"number"},os={class:"song-item"},ns={class:"detail"},ts=I(()=>e("br",null,null,-1)),as={class:"singer"};function ls(s,c,r,w,k,u){const i=_("van-image"),g=_("van-col"),p=_("van-row"),h=_("van-button");return t(),l("div",q,[s.showCover?(t(),l("div",{key:0,id:"summaryPoster",class:z(["summary-warp poster",{"short-poster":s.isShort}])},[e("span",E,n(s.songs[0]&&s.songs[0].dateRange),1),e("div",F,[e("p",H,[a("盘点"),e("span",j,n(s.songs.length),1),a("首"+n(s.songs[0]&&s.songs[0].title),1)]),e("p",null,[a("顺带学习了"),e("span",G,n(s.fullWords.length),1),a("个单词/短语")])]),s.isShort?(t(),C(p,{key:1},{default:m(()=>[(t(!0),l(f,null,y(s.songs,o=>(t(),C(g,{key:o.data,span:"8",class:"song-item"},{default:m(()=>[d(i,{class:"poster",width:"1.8rem",height:"1.8rem",fit:"cover",src:s.getSongAssets(o.posterName)},null,8,["src"])]),_:2},1024))),128))]),_:1})):(t(),l("div",J,[(t(!0),l(f,null,y(s.songs,o=>(t(),l("div",{key:o.data,class:"song-item"},[d(i,{class:"poster",width:"1.3rem",height:"1.3rem",fit:"cover",src:s.getSongAssets(o.posterName)},null,8,["src"]),e("div",K,[e("span",null,n(o.song),1),M,e("span",O,n(o.singer),1)])]))),128))]))],2)):S("",!0),s.showCover?(t(),l("div",Q,[d(h,{plain:"",size:"small",onClick:c[0]||(c[0]=o=>s.isShort=!s.isShort)},{default:m(()=>[a("切换封面")]),_:1}),d(h,{plain:"",size:"small",onClick:c[1]||(c[1]=o=>s.downloadImage("summaryPoster",s.songs[s.songs.length-1].date))},{default:m(()=>[a("下载封面")]),_:1}),d(h,{plain:"",size:"small",onClick:s.showSummary},{default:m(()=>[a("展示")]),_:1},8,["onClick"])])):S("",!0),s.showAnime?(t(),l("div",X,[e("span",Y,n(s.songs[0]&&s.songs[0].dateRange),1),d(b,{name:"van-slide-up"},{default:m(()=>[U(e("div",Z,[e("p",x,[a("盘点"),e("span",ss,n(s.songs.length),1),a("首"+n(s.songs[0]&&s.songs[0].title),1)]),e("p",null,[a("顺带学习了"),e("span",es,n(s.fullWords.length),1),a("个单词/短语")])],512),[[A,s.textSlideUp]])]),_:1}),(t(!0),l(f,null,y(s.songs,(o,v)=>(t(),l("div",{key:o.data},[d(b,{name:"van-slide-up"},{default:m(()=>[U(e("div",os,[d(i,{class:"poster",width:"1.8rem",height:"1.8rem",fit:"cover",src:s.getSongAssets(o.posterName)},null,8,["src"]),e("div",ns,[e("span",null,n(o.song),1),ts,e("span",as,n(o.singer),1)])],512),[[A,s.songSlideUp[v]]])]),_:2},1024)]))),128))])):S("",!0)])}const us=N(D,[["render",ls],["__scopeId","data-v-a10b343e"]]);export{us as default};
